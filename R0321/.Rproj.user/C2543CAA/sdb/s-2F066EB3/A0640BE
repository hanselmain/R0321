{
    "collab_server" : "",
    "contents" : "##從上次的解答開始\nif (!require('SportsAnalytics')){\n  install.packages(\"SportsAnalytics\")\n  library(SportsAnalytics)\n}\nNBA1415<-fetch_NBAPlayerStatistics(\"14-15\")\nfor(i in 1:nrow(NBA1415)){\n  if(NBA1415[i,\"GamesPlayed\"]>70&NBA1415[i,\"TotalPoints\"]>1500){\n    print(NBA1415[i,c(\"Name\",\"Team\",\"Position\")])\n  }\n}\n\n## 都說了for不好用\nsubset(NBA1415,GamesPlayed>70&TotalPoints>1500)[,c(\"Name\",\"Team\",\"Position\")]\n## 都說了for不好用-2\nNBA1415[NBA1415$GamesPlayed>70&NBA1415$TotalPoints>1500,c(\"Name\",\"Team\",\"Position\")]\n\n## 可是....還是有想用的時候啊....\nSan<-subset(NBA1415,Team=='SAN')\norder(San$TotalPoints,decreasing = T)\nSan[order(San$TotalPoints,decreasing = T)[1],\n    c(\"Name\",\"Team\",\"TotalPoints\")]\n\n##我們還是用for+unique()試試看好了\nunique(NBA1415$Team)\nfor(team in unique(NBA1415$Team)){\n  selectTeam<-subset(NBA1415,Team==team)\n  print(selectTeam[order(selectTeam$TotalPoints,decreasing = T)[1],\n                   c(\"Name\",\"Team\",\"TotalPoints\")])\n}\n\n##用rbind()把輸出整理成一個Data Frame\nFinalOutput<-NULL\nfor(team in unique(NBA1415$Team)){\n  selectTeam<-subset(NBA1415,Team==team)\n  FinalOutput<-rbind(FinalOutput,\n                     selectTeam[\n                       order(selectTeam$TotalPoints,decreasing = T)[1],\n                       c(\"Name\",\"Team\",\"TotalPoints\")])\n}\nFinalOutput\n\n\n\n##apply()\napply(NBA1415,2,max)\n##apply()範例2\napply(NBA1415[,c(\"GamesPlayed\",\"TotalMinutesPlayed\",\"TotalPoints\")],2,mean)\n\n\n##sapply()\nsapply(iris, mean)\n##sapply()範例2\nsapply(NBA1415[,c(\"GamesPlayed\",\"TotalMinutesPlayed\",\"TotalPoints\")],mean)\n\n\n##lapply(): List\nlapply(iris, mean)\n\n##lapply()範例2\nlapply(NBA1415[,c(\"GamesPlayed\",\"TotalMinutesPlayed\",\"TotalPoints\")],mean)\n\n\n##tapply()\ntapply(NBA1415$Name,NBA1415$Team,length)\ntapply(NBA1415$TotalPoints,NBA1415$Team,max)\ntapply(NBA1415$TotalPoints,NBA1415$Team,mean)\ntapply(NBA1415$TotalPoints,NBA1415$Team,range)\n\n##split()\nsplit(1:30,gl(3, 10))\n\n##split()+lapply()\nlapply(split(1:30,gl(3, 10)),mean)\ntapply(1:30,gl(3, 10),mean)\n\n\n##Data Frame也可以split()\nNBA1415Team<-split(NBA1415[,c(\"TotalPoints\",\"GamesPlayed\")],NBA1415$Team)\n##split()搭配apply()家族使用\nlapply(NBA1415Team, colMeans)\nsapply(NBA1415Team, colMeans)\n\n##split()：用多個欄位來分群\nNBA1415TP<-split(NBA1415[,c(\"TotalPoints\",\"GamesPlayed\")],list(NBA1415$Team,NBA1415$Position))\nlapply(NBA1415TP, colMeans)\nsapply(NBA1415TP, colMeans)\n\n##類似apply家族的函數：aggregate()\naggregate(NBA1415$TotalPoints, by=list(NBA1415$Team,NBA1415$Position), FUN=mean, na.rm=TRUE)\n##類似apply家族的函數：aggregate()-2\naggregate(TotalPoints ~ Team+Position, data = NBA1415, mean)\n\n#Missing Value\nx<-c(1,2,3,4,5,NA)\nmean(x)\nmean(x, na.rm=T)\nsum(x)\nsum(x, na.rm=T)\n\n##Removing NA\nx <- c(1, 2, NA, 4, NA, 5)\nx[! is.na(x)]\nx[! complete.cases(x)]\n\n\n##定義一個新的函數\nround2<-function(v){\n  round(v,digits = 2)\n}\nround2(3.886)\n##Lazy Evaluation\nround2Lazy<-function(vector,nothing){\n  round(vector,digits = 2)\n}\nround2(3.886)\n##Lazy Evaluation 2\nf <- function(a, b) {\n  print(a)\n  print(b)\n}\nf(45)\n##…參數\nroundmean<-function(vector, ...){\n  round(mean(vector,...),digits=2)\n}\nroundmean(c(1.1,2,3,4,5))\nroundmean(c(1.1,2,3,4,5,NA))\nroundmean(c(1.1,2,3,4,5,NA),na.rm=T)\n\n##參數預設值\nroundDe<-function(v=1.111:10.111){\n  round(v,digits = 2)\n}\nroundDe(1.66:6.66)\nroundDe()\n##retrun()\nround2<-function(v){\n  if(!is.numeric(v)){\n    print(\"輸入數字\")\n    return()\n  }\n  round(v,digits = 2)\n}\nround2(\"a\")\n\n\n##函數也可以當作參數來用\napply(iris,2,max)\n\nRoundNumber2<-function(v,XFun){\n  round(XFun(v),digits = 2)\n}\nRoundNumber2(1.1:10.1,mean)\n\n##從網路上下載檔案 download.file\nif (!require('RCurl')){\n  install.packages(\"RCurl\")\n  library(RCurl)\n}\ndownload.file(\"https://raw.githubusercontent.com/yijutseng/\n              BigDataCGUIM/master/files/opendata10401.csv\", \n              destfile = \"open.csv\", method = \"curl\")\n\n## read.csv使用範例\ndata <- read.csv('open.csv')\ndata",
    "created" : 1458541780944.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2696149459",
    "id" : "A0640BE",
    "lastKnownWriteTime" : 1458541792,
    "last_content_update" : 1458541792428,
    "path" : "C:/Users/CGU/Desktop/R0321/R0321/R0321.R",
    "project_path" : "R0321.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}